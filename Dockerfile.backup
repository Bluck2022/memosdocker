FROM alpine:3.20

ENV TZ=Asia/Shanghai
RUN apk add --no-cache \
        mysql-client \
        dcron \
        tzdata \
        ca-certificates \
        curl && \
    # 1. 根据容器内架构一次性下载对应二进制
    ARCH=$(uname -m) && \
    if [ "$ARCH" = "aarch64" ]; then ARCH="arm64"; fi && \
    if [ "$ARCH" = "x86_64" ];  then ARCH="amd64";  fi && \
    curl -Lo /usr/local/bin/rclone \
      "https://downloads.rclone.org/v1.70.3/linux-${ARCH}/rclone-v1.70.3-linux-${ARCH}" && \
    chmod +x /usr/local/bin/rclone
