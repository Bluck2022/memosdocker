FROM alpine:3.20

ENV TZ=Asia/Shanghai
RUN apk add --no-cache \
        mysql-client \
        dcron \
        tzdata \
        ca-certificates \
        curl && \
    # 1️⃣ 改为官方“单文件多架构”版本，自动识别架构
    curl -Lo /usr/local/bin/rclone https://downloads.rclone.org/rclone-current-linux-$(uname -m).zip \
    && unzip /usr/local/bin/rclone -d /usr/local/bin/ \
    && chmod +x /usr/local/bin/rclone \
    && rm -rf /usr/local/bin/rclone-*

COPY backup.sh /backup.sh
RUN chmod +x /backup.sh
